<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <title>Data User Bot</title>
  <link rel="stylesheet" href="/style.css" />
</head>
<body>
  <h1>Daftar User Terdaftar</h1>
  <div id="user-data"></div>

  <script>
    function sensorNomor(nomor, jumlahKarakter = 4) {
      return nomor.substring(0, jumlahKarakter) + '*'.repeat(nomor.length - jumlahKarakter);
    }

    async function loadUserData() {
      try {
        const res = await fetch('/api/listusers');
        const data = await res.json();
        const div = document.getElementById('user-data');

        data.forEach(user => {
          const el = document.createElement('div');
          el.className = 'user';
          el.innerHTML = `
            <strong>${user.nama}</strong><br>
            Nomor: ${sensorNomor(user.nomor)}<br>
            Status: <span class="${user.status}">${user.status}</span>
          `;
          div.appendChild(el);
        });
      } catch (e) {
        console.error('Gagal memuat data:', e);
      }
    }

    loadUserData();
  </script>
</body>
</html>